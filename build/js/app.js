var common;!function(t){function e(t){t.getCurrentUser()}t.Run=e}(common||(common={})),function(){var t=angular.module("common",[]);t.run(["UserService",common.Run]),t.value("INFINITE_SCROLL_THROTTLE_MILLISECONDS",1e3)}();var common;!function(t){var e;!function(t){var e=function(){function t(t){this.$window=t,this._isWindowLocationChanging=!1}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.prototype.getFragment=function(){return 0===this.$window.location.hash.indexOf("#")?this.parseQueryString(this.$window.location.hash.substr(1)):{}},t.prototype.getQueryString=function(){return 0===this.$window.location.search.indexOf("?")?this.parseQueryString(this.$window.location.search.substr(1)):null},t.prototype.parseQueryString=function(t){var e,r,n,i,o,s,c,a={};if(null===t)return a;e=t.split("&");for(var u=0;u<e.length;u++)r=e[u],n=r.indexOf("="),-1===n?(i=r,o=null):(i=r.substr(0,n).replace("/",""),o=r.substr(n+1)),s=decodeURIComponent(i).toLowerCase(),c=decodeURIComponent(o),a[s]=c;return a},t.prototype.encodeQueryString=function(t){var e=[];for(var r in t)t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},t.prototype.resetQueryStringWindow=function(t){var e=this.encodeQueryString(t);e&&(e="?"+e),this.$window.location.search=e||"",this._isWindowLocationChanging=!0},t.prototype.isWindowLocationChanging=function(){return this._isWindowLocationChanging},t.$inject=["$window"],t}();t.UrlService=e}(e=t.services||(t.services={}))}(common||(common={})),function(){angular.module("common").service("UrlService",common.services.UrlService.factory())}();var common;!function(t){var e;!function(t){var e=function(){function t(t){this.toastr=t}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.prototype.showSuccess=function(t,e,r){return void 0===e&&(e=""),this.toastr.success(t,e,r)},t.prototype.showWarning=function(t,e,r){return void 0===e&&(e=""),this.toastr.warning(t,e,r)},t.prototype.showError=function(t,e,r){return void 0===e&&(e=""),this.toastr.error(t,e,r)},t.prototype.showInfo=function(t,e,r){return void 0===e&&(e=""),this.toastr.info(t,e,r)},t.prototype.clearMessages=function(){this.toastr.clear()},t.$inject=["toastr"],t}();t.NotificationService=e}(e=t.services||(t.services={}))}(common||(common={})),function(){angular.module("common").service("NotificationService",common.services.NotificationService.factory())}(),function(){angular.module("medium",[])}();var medium;!function(t){var e=function(){function t(t,e){this.$http=t,this.$q=e,this.apiBase="/api/medium/",this.currentUser=null}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.prototype.getLoginUrl=function(){var t=this.apiBase+"auth-url";return this.$http.get(t).then(function(t){return t.data})},t.prototype.userLoggedIn=function(){return null!==this.currentUser},t.prototype.getCurrentUser=function(){var t=this;if(null!==this.currentUser)return this.$q.when(this.currentUser);var e=this.$q.defer(),r=this.apiBase+"me";return this.$http.get(r).then(function(r){t.currentUser=r.data,e.resolve(t.currentUser)})["catch"](function(t){e.reject(t)}),e.promise},t.prototype.login=function(t,e){var r={state:t,code:e},n=this.apiBase+"login";return this.$http.post(n,r)},t.prototype.getUserPublications=function(){var t=this.$q.defer(),e=this.apiBase+"publications";return this.$http.get(e).then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(t){return t.data}),t.promise},t.prototype.getUserBookmarked=function(){var t=this.$q.defer(),e=this.apiBase+"bookmarked";return this.$http.get(e).then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(t){return t.data}),t.promise},t.$inject=["$http","$q"],t}();t.MediumService=e}(medium||(medium={})),function(){angular.module("medium").factory("MediumService",medium.MediumService.factory())}(),function(){angular.module("reddit",[])}();var reddit;!function(t){var e=function(){function t(){this.templateUrl="views/reddit-post.html",this.restrict="E",this.scope={post:"="},t.prototype.link=function(t,e,r){switch(t.post.thumbnail.toUpperCase()){case"SELF":case"DEFAULT":t.post.thumbnail=""}}}return t.factory=function(){var e=function(){return new t};return e},t}();t.RedditContentDirective=e}(reddit||(reddit={})),function(){angular.module("reddit").directive("fsRedditPost",reddit.RedditContentDirective.factory())}();var reddit;!function(t){var e=function(){function t(t,e){this.$http=t,this.$q=e,this.apiBase="/api/reddit/",this.currentUser=null}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.prototype.getSavedPosts=function(t){var e=this.apiBase+"saved";return t&&(e+="?after="+t),this.$http.get(e).then(function(t){return t.data})},t.$inject=["$http","$q"],t}();t.RedditService=e}(reddit||(reddit={})),function(){angular.module("reddit").factory("RedditService",reddit.RedditService.factory())}(),function(){angular.module("twitter",[])}();var twitter;!function(t){var e=function(){function t(){this.templateUrl="views/tweet.html",this.restrict="E",this.scope={tweet:"="},t.prototype.link=function(t,e,r){}}return t.factory=function(){var e=function(){return new t};return e},t}();t.TweetDirective=e}(twitter||(twitter={})),function(){angular.module("twitter").directive("fsTweet",twitter.TweetDirective.factory())}();var twitter;!function(t){var e=function(){function t(){this.templateUrl="views/tweet-content.html",this.restrict="E",this.scope={text:"@",entities:"=",extendedEntities:"=",showPictures:"="},t.prototype.link=function(t,e,r){var n=t.text;angular.forEach(t.entities.urls,function(t,e){n=n.replace(t.url,'<a href="'+t.url+'" target="_blank">'+t.url+"</a>")}),angular.forEach(t.entities.media,function(e){var r="";t.showPictures&&(r='<a href="'+e.media_url_https+'" target="_blank">'+e.url+"</a>"),n=n.replace(e.url,r)}),t.processedText=n}}return t.factory=function(){var e=function(){return new t};return e},t}();t.TweetContentDirective=e}(twitter||(twitter={})),function(){angular.module("twitter").directive("fsTweetContent",twitter.TweetContentDirective.factory())}();var twitter;!function(t){var e=function(){function t(t,e){this.$http=t,this.$q=e,this.apiBase="/api/twitter/",this.currentUser=null}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.prototype.getFavorites=function(t){var e=this.$q.defer(),r=this.apiBase+"favorites";return t&&(r+="?maxID="+t),this.$http.get(r).then(function(t){200===t.status?e.resolve(t.data):e.reject(t.data)})["catch"](function(t){e.reject(t.data)}),e.promise},t.$inject=["$http","$q"],t}();t.TwitterService=e}(twitter||(twitter={})),function(){angular.module("twitter").factory("TwitterService",twitter.TwitterService.factory())}(),function(){angular.module("tumblr",[])}();var tumblr;!function(t){var e=function(){function t(t){this.TumblrService=t,this.loadingLikedPosts=!1,this.getLikes()}return t.prototype.getLikes=function(){var t=this;this.loadingLikedPosts=!0,this.TumblrService.getLikes().then(function(e){t.likedPosts=e.liked_posts,t.loadingLikedPosts=!1})["catch"](function(e){console.log(e),t.loadingLikedPosts=!1})},t.$inject=["TumblrService"],t}();t.TumblrController=e}(tumblr||(tumblr={})),function(){angular.module("tumblr").controller("TumblrController",tumblr.TumblrController)}();var tumblr;!function(t){var e=function(){function t(t,e){this.$http=t,this.$q=e,this.apiBase="/api/tumblr/"}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.prototype.getLikes=function(){var t=this.$q.defer(),e=this.apiBase+"likes";return this.$http.get(e).then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(e){t.reject(e.data)}),t.promise},t.$inject=["$http","$q"],t}();t.TumblrService=e}(tumblr||(tumblr={})),function(){angular.module("tumblr").factory("TumblrService",tumblr.TumblrService.factory())}(),function(){angular.module("user",[])}();var user;!function(t){var e=function(){function t(e,r){this.$rootScope=e,this.UserService=r,this.template='<a href="javascript:void(0)" data-ng-click="logout()">Logout</a>',this.restrict="E",this.replace=!0,this.scope=!1,t.prototype.link=function(t,e,n){t.logout=function(){r.logout()}}}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.$inject=["$rootScope","UserService"],t}();t.LogoutButtonDirective=e}(user||(user={})),function(){angular.module("user").directive("fsLogoutButton",user.LogoutButtonDirective.factory())}();var user;!function(t){var e=function(){function t(e){this.$rootScope=e,this.templateUrl="views/user.html",this.restrict="E",this.replace=!0,t.prototype.link=function(t,r,n){t.user=e.user,e.$watch("user",function(e){t.user=e})}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.$inject=["$rootScope"],t}();t.UserDirective=e}(user||(user={})),function(){angular.module("user").directive("fsCurrentUser",user.UserDirective.factory())}();var user;!function(t){var e=function(){function t(e){this.$rootScope=e,this.restrict="A",t.prototype.link=function(t,r,n){e.$watch("user",function(t){t?r.removeClass("ng-hide"):r.addClass("ng-hide")})}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.$inject=["$rootScope"],t}();t.IfUserDirective=e}(user||(user={})),function(){angular.module("user").directive("fsIfUser",user.IfUserDirective.factory())}();var user;!function(t){var e=function(){function t(e){this.$rootScope=e,this.restrict="A",t.prototype.link=function(t,r,n){e.$watch("user",function(t){t?r.addClass("ng-hide"):r.removeClass("ng-hide")})}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.$inject=["$rootScope"],t}();t.IfNotUserDirective=e}(user||(user={})),function(){angular.module("user").directive("fsIfNotUser",user.IfNotUserDirective.factory())}();var user;!function(t){var e;!function(t){var e=function(){function t(t,e,r){this.$http=t,this.$q=e,this.$rootScope=r,this.apiBase="/api/"}return t.factory=function(){var e=function(e,r,n){return new t(e,r,n)};return e.$inject=t.$inject,e},t.prototype.getAllUsers=function(){var t=this.$q.defer();return this.$http.get(this.apiBase+"user/all").then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(e){t.reject(e.data)}),t.promise},t.prototype.login=function(t){var e=this,r=this.$q.defer();return this.$http.post(this.apiBase+"user/login",t).then(function(t){200===t.status?(e.$rootScope.user=t.data,e.$rootScope.$broadcast("USER_LOGGED_IN"),r.resolve(e.$rootScope.user)):r.reject(t.data)})["catch"](function(t){r.reject(t.data)}),r.promise},t.prototype.createUser=function(t){var e=this,r=this.$q.defer();return this.$http.post(this.apiBase+"user/create",t).then(function(t){200===t.status?(e.$rootScope.user=t.data,e.$rootScope.$broadcast("USER_CREATED"),r.resolve(e.$rootScope.user)):r.reject(t.data)})["catch"](function(t){r.reject(t.data)}),r.promise},t.prototype.unlinkAccount=function(t,e){var r=this,n=this.$q.defer();return this.$http.post(this.apiBase+"user/account/unlink",{id:t,type:e}).then(function(t){200===t.status?(r.$rootScope.user=t.data,n.resolve(t.data)):n.reject(t.data)})["catch"](function(t){n.reject(t.data)}),n.promise},t.prototype.userLoggedIn=function(){return angular.isDefined(this.$rootScope.user)&&null!==this.$rootScope.user},t.prototype.getCurrentUser=function(){var t=this,e=this.$q.defer();return this.$rootScope.user?this.$q.when(this.$rootScope.user):this.$http.get(this.apiBase+"user").then(function(r){200===r.status?(t.$rootScope.user=r.data,e.resolve(t.$rootScope.user)):e.reject(r.data)})["catch"](function(t){e.reject(t.data)}),e.promise},t.prototype.updateProfile=function(t){var e=this,r=this.$q.defer(),n={id:t._id,user:t};return this.$http.post(this.apiBase+"user/update",n).then(function(t){200===t.status?(e.$rootScope.user=t.data,e.$rootScope.$broadcast("USER_UPDATED"),r.resolve(e.$rootScope.user)):r.reject(t.data)})["catch"](function(t){r.reject(t.data)}),r.promise},t.prototype.setPassword=function(t){var e=this,r=this.$q.defer();return this.$http.post(this.apiBase+"user/password",t).then(function(t){200===t.status?(e.$rootScope.user=t.data,e.$rootScope.$broadcast("USER_PASSWORD_UPDATED"),r.resolve(e.$rootScope.user)):r.reject(t.data)})["catch"](function(t){r.reject(t.data)}),r.promise},t.prototype.resetPassword=function(t,e){var r=this,n=this.$q.defer();return this.$http.post(this.apiBase+"user/password/reset",{token:e,password:t}).then(function(t){200===t.status?(r.$rootScope.user=t.data,r.$rootScope.$broadcast("USER_PASSWORD_RESET"),n.resolve(r.$rootScope.user)):n.reject(t.data)})["catch"](function(t){n.reject(t.data)}),n.promise},t.prototype.logout=function(){var t=this,e=this.$q.defer();return this.$http.get(this.apiBase+"logout").then(function(r){200===r.status?(t.$rootScope.user=null,t.$rootScope.$broadcast("USER_LOGOUT"),e.resolve(r.data)):e.reject(r.data)})["catch"](function(t){e.reject(t.data)}),e.promise},t.prototype.sendForgotPasswordEmail=function(t){var e=this,r=this.$q.defer();return this.$http.post(this.apiBase+"user/forgotpassword",{email:t}).then(function(t){200===t.status?(e.$rootScope.$broadcast("USER_FORGOTPASSWORD_EMAIL_SENT"),r.resolve(!0)):r.reject(!1)})["catch"](function(t){r.reject(t.data)}),r.promise},t.prototype.validateResetToken=function(t){var e=this.$q.defer();return this.$http.post(this.apiBase+"user/validateResetToken",{token:t}).then(function(t){200===t.status?e.resolve(t.data):e.reject(t.data)})["catch"](function(t){e.reject(t.data)}),e.promise},t.$inject=["$http","$q","$rootScope"],t}();t.UserService=e}(e=t.services||(t.services={}))}(user||(user={})),function(){angular.module("user").service("UserService",user.services.UserService.factory())}(),function(){angular.module("imgur",[])}();var imgur;!function(t){var e;!function(t){var e=function(){function t(t,e){this.$http=t,this.$q=e,this.apiBase="/api/imgur/",this.currentUser=null}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.prototype.getAccount=function(){var t=this.$q.defer();return this.$http.get(this.apiBase+"account").then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(e){t.reject(e.data)}),t.promise},t.prototype.getFavorites=function(){var t=this.$q.defer();return this.$http.get(this.apiBase+"favorites").then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(e){t.reject(e.data)}),t.promise},t.prototype.getAlbumInfo=function(t){var e=this.$q.defer();if(t&&t.id){var r=this.apiBase+"album/"+t.id;this.$http.get(r).then(function(t){200===t.status?e.resolve(t.data):e.reject(t.data)})["catch"](function(t){e.reject(t.data)})}else e.resolve(null);return e.promise},t.prototype.getAlbumImages=function(t){var e=this.$q.defer();if(t&&t.id){var r=this.apiBase+"album/"+t.id+"/images";this.$http.get(r).then(function(t){200===t.status?e.resolve(t.data):e.reject(t.data)})["catch"](function(t){e.reject(t.data)})}else e.resolve(null);return e.promise},t.prototype.refresh=function(){var t=this.$q.defer();return this.$http.get(this.apiBase+"refresh").then(function(e){200===e.status?t.resolve(e.data):t.reject(e.data)})["catch"](function(e){t.reject(e.data)}),t.promise},t.$inject=["$http","$q"],t}();t.ImgurService=e}(e=t.services||(t.services={}))}(imgur||(imgur={})),function(){angular.module("imgur").factory("ImgurService",imgur.services.ImgurService.factory())}();var favoriteScraper;!function(t){function e(t,e,r,n){n.debugInfoEnabled(!1),e.otherwise("/"),t.state("home",{url:"/",templateUrl:"partials/home.html"}).state("reddit",{url:"/reddit",templateUrl:"partials/reddit.html",controller:"RedditController",controllerAs:"ctrl"}).state("medium",{url:"/medium",templateUrl:"partials/medium.html",controller:"MediumController",controllerAs:"ctrl"}).state("twitter",{url:"/twitter",templateUrl:"partials/twitter.html",controller:"TwitterController",controllerAs:"ctrl"}).state("imgur",{url:"/imgur",templateUrl:"partials/imgur.html",controller:"ImgurController",controllerAs:"ctrl"}).state("tumblr",{url:"/tumblr",templateUrl:"partials/tumblr.html",controller:"TumblrController",controllerAs:"ctrl"}).state("user",{url:"/user",templateUrl:"partials/user.html",controller:"UserController",controllerAs:"ctrl"}).state("login",{url:"/login",templateUrl:"partials/login.html"}).state("signup",{url:"/signup",templateUrl:"partials/signup.html"}).state("reset",{url:"/reset?token",templateUrl:"partials/reset.html",controller:"ResetPasswordController",controllerAs:"ctrl",resolve:{token:["$stateParams","$state","UserService",function(t,e,r){return r.validateResetToken(t.token).then(function(e){return t.token})["catch"](function(t){e.go("home")})}]}}),r.interceptors.push("HttpInterceptorService")}t.Config=e}(favoriteScraper||(favoriteScraper={})),function(){angular.module("templates",[]);var t=angular.module("favoriteScraper",["ngSanitize","ngMessages","ui.bootstrap","ui.router","angularMoment","angular-loading-bar","imgur","reddit","common","medium","tumblr","twitter","user","templates"]);t.config(["$stateProvider","$urlRouterProvider","$httpProvider","$compileProvider",favoriteScraper.Config]),t.constant("toastr",window.toastr)}();var common;!function(t){var e=function(){function t(t,e,r){this.$rootScope=t,this.$state=e,this.UserService=r,r.getCurrentUser(),t.$on("USER_LOGOUT",function(){e.go("home")})}return t.$inject=["$rootScope","$state","UserService"],t}();t.RootController=e}(common||(common={})),function(){angular.module("common").controller("RootController",common.RootController)}();var common;!function(t){var e=function(){function t(){this.templateUrl="views/alert-container.html",this.restrict="E",this.scope={alerts:"="},t.prototype.link=function(t,e,r){t.closeAlert=function(e){t.alerts.splice(e,1)}}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.AlertContainerDirective=e}(common||(common={})),function(){angular.module("common").directive("fsAlertContainer",common.AlertContainerDirective.factory())}();var common;!function(t){var e=function(){function t(){this.restrict="A",this.require="ngModel",this.scope={fsCompareTo:"="},t.prototype.link=function(t,e,r,n){n.$validators.compareTo=function(e){return e==t.fsCompareTo},t.$watch("fsCompareTo",function(){n.$validate()})}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.CompareToDirective=e}(common||(common={})),function(){angular.module("common").directive("fsCompareTo",common.CompareToDirective.factory())}();var common;!function(t){var e=function(){function t(e,r){var n=this;this.restrict="A",this.scope={fsLazySrc:"@",animateSpeed:"@",animateVisible:"@"},this.uid=0,this.elements={},this.doc=r[0],this.body=this.doc.body,this.win=e,this.$win=angular.element(this.win),this.uid=0,this.elements={},this.$win.bind("scroll",function(){n.checkImage()}),this.$win.bind("resize",function(){n.checkImage()}),t.prototype.link=function(t,e,r){e.bind("load",function(t){n.onLoad(t.target)}),t.$watch("fsLazySrc",function(){var r="1s";if(null!=t.animateSpeed&&(r=t.animateSpeed),n.isVisible(e))t.animateVisible&&e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+r,transition:"opacity "+r}),e.attr("src",t.fsLazySrc);else{var i=n.getUid(e);e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+r,transition:"opacity "+r}),n.elements[i]={element:e,$scope:t}}}),t.$on("$destroy",function(){e.unbind("load");var t=n.getUid(e);n.elements.hasOwnProperty(t)&&delete n.elements[t]})}}return t.prototype.getUid=function(t){var e=t.data("__uid");return e||t.data("__uid",e=""+ ++this.uid),e},t.prototype.getWindowOffset=function(){var t,e="number"==typeof this.win.pageXOffset?this.win.pageXOffset:(((t=this.doc.documentElement)||(t=this.body.parentNode))&&"number"==typeof t.ScrollLeft?t:this.body).ScrollLeft,r="number"==typeof this.win.pageYOffset?this.win.pageYOffset:(((t=this.doc.documentElement)||(t=this.body.parentNode))&&"number"==typeof t.ScrollTop?t:this.body).ScrollTop;return{offsetX:e,offsetY:r}},t.prototype.isVisible=function(t){var e,r,n=t[0],i=n.getBoundingClientRect(),o=this.getWindowOffset(),s=o.offsetX,c=o.offsetY,a=i.width,u=i.height,l=i.left+s,f=i.top+c,d=Math.max(this.doc.documentElement.clientWidth,this.win.innerWidth||0),h=Math.max(this.doc.documentElement.clientHeight,this.win.innerHeight||0);return c>=f?f+u>=c&&(r=!0):f>=c&&c+h>=f&&(r=!0),s>=l?l+a>=s&&(e=!0):l>=s&&s+d>=l&&(e=!0),e&&r},t.prototype.checkImage=function(){var t=this;this.elements&&Object.keys(this.elements).forEach(function(e){var r=t.elements[e],n=r.element,i=r.$scope;t.isVisible(n)&&n.attr("src",i.fsLazySrc)})},t.prototype.onLoad=function(t){var e=angular.element(t),r=this.getUid(e);e.css("opacity",1),this.elements.hasOwnProperty(r)&&delete this.elements[r]},t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.$inject=["$window","$document"],t}();t.LazySrcDirective=e}(common||(common={})),function(){angular.module("common").directive("fsLazySrc",common.LazySrcDirective.factory())}();var common;!function(t){var e=function(){function t(){this.restrict="A",this.scope=!1,t.prototype.link=function(t,e,r){e.css({"-webkit-transition":"max-width 1s","-moz-transition":"max-width 1s","-ms-transition":"max-width 1s","-o-transition":"max-width 1s",transition:"max-width 1s","max-width":"300px"}),e.bind("click",function(){var t=e.css("max-width");console.log(t),"300px"===t?e.css("max-width","680px"):e.css("max-width","300px")}),t.$on("$destroy",function(){e.unbind("click")})}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.ImageToggleSizeDirective=e}(common||(common={})),function(){angular.module("common").directive("fsImgToggleSize",common.ImageToggleSizeDirective.factory())}();var common;!function(t){var e=function(){function t(e,r,n,i){this.restrict="A",this.scope={fsInfiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},t.prototype.link=function(t,o,s){var c,a,u,l,f,d,h,p,m,v,g,$,S,y,w,U,j;return j=angular.element(r),S=null,y=null,a=null,u=null,v=!0,U=!1,w=null,m=function(t){return t=t[0]||t,isNaN(t.offsetHeight)?t.document.documentElement.clientHeight:t.offsetHeight},g=function(t){return t[0].getBoundingClientRect&&!t.css("none")?t[0].getBoundingClientRect().top+$(t):void 0},$=function(t){return t=t[0]||t,isNaN(window.pageYOffset)?t.document.documentElement.scrollTop:t.ownerDocument.defaultView.pageYOffset},p=function(){var r,n,i,s,c;return u===j?(r=m(u)+$(u[0].document.documentElement),i=g(o)+m(o)):(r=m(u),n=0,void 0!==g(u)&&(n=g(u)),i=g(o)-n+m(o)),U&&(i=m((o[0].ownerDocument||o[0].document).documentElement)),s=i-r,c=s<=m(u)*S+1,c?(a=!0,y?t.$$phase||e.$$phase?t.fsInfiniteScroll():t.$apply(t.fsInfiniteScroll):void 0):a=!1},null!=i&&(p=_.throttle(p,i)),t.$on("$destroy",function(){return u.unbind("scroll",p),null!=w?(w(),w=null):void 0}),d=function(t){return S=parseFloat(t)||0},t.$watch("infiniteScrollDistance",d),d(t.infiniteScrollDistance),f=function(t){return y=!t,y&&a?(a=!1,p()):void 0},t.$watch("infiniteScrollDisabled",f),f(t.infiniteScrollDisabled),h=function(t){return U=t},t.$watch("infiniteScrollUseDocumentBottom",h),h(t.infiniteScrollUseDocumentBottom),c=function(t){return null!=u&&u.unbind("scroll",p),u=t,null!=t?u.bind("scroll",p):void 0},c(j),t.infiniteScrollListenForEvent&&(w=e.$on(t.infiniteScrollListenForEvent,p)),l=function(t){if(null!=t&&0!==t.length){if(t instanceof HTMLElement?t=angular.element(t):"function"==typeof t.append?t=angular.element(t[t.length-1]):"string"==typeof t&&(t=angular.element(document.querySelector(t))),null!=t)return c(t);throw new Error("invalid infinite-scroll-container attribute.")}},t.$watch("infiniteScrollContainer",l),l(t.infiniteScrollContainer||[]),null!=s.infiniteScrollParent&&c(angular.element(o.parent())),null!=s.infiniteScrollImmediateCheck&&(v=t.$eval(s.infiniteScrollImmediateCheck)),n(function(){return v?p():void 0},0,1)}}return t.factory=function(){var e=function(e,r,n,i){return new t(e,r,n,i)};return e.$inject=t.$inject,e},t.$inject=["$rootScope","$window","$interval","INFINITE_SCROLL_THROTTLE_MILLISECONDS"],t}();t.InfiniteScrollDirective=e}(common||(common={})),function(){angular.module("common").directive("fsInfiniteScroll",common.InfiniteScrollDirective.factory())}();var common;!function(t){var e=function(){function t(e){this.templateUrl="views/nav-bar.html",this.restrict="E",this.scope=!1,t.prototype.link=function(t,r,n){t.navbarCollapsed=!0,t.navigateToState=function(r){t.navbarCollapsed=!0,e.transitionTo(r)}}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.$inject=["$state"],t}();t.NavBarDirective=e}(common||(common={})),function(){angular.module("common").directive("fsNavBar",common.NavBarDirective.factory())}();var common;!function(t){var e=function(){function t(e,r){this.templateUrl="views/nav-pills.html",this.restrict="E",this.scope=!1,this.currentState=null,t.prototype.link=function(t,n,i){t.states=["reddit","twitter","imgur","tumblr","user"],t.currentState=r.current,e.$on("$stateChangeSuccess",function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.currentState=r[0].name})}}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.$inject=["$rootScope","$state"],t}();t.NavPillsDirective=e}(common||(common={})),function(){angular.module("common").directive("fsNavPills",common.NavPillsDirective.factory())}();var common;!function(t){var e;!function(t){var e=function(){function t(t,e){var r=this;this.$injector=t,this.NotificationService=e,this.responseError=function(t){return 400===t.status?r.NotificationService.showError(t.data):403===t.status&&r.$injector.get("$state").transitionTo("login"),t}}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.$inject=["$injector","NotificationService"],t}();t.HttpInterceptorService=e}(e=t.services||(t.services={}))}(common||(common={})),function(){angular.module("common").service("HttpInterceptorService",common.services.HttpInterceptorService.factory())}();var imgur;!function(t){var e=function(){function t(t){this.ImgurService=t,this.getFavorites()}return t.prototype.getAccount=function(){var t=this;this.ImgurService.getAccount().then(function(e){t.account=e})["catch"](function(t){console.log(t)})},t.prototype.getFavorites=function(){var t=this;this.ImgurService.getFavorites().then(function(e){t.favorites=e.data})["catch"](function(t){console.log(t)})},t.prototype.getAlbumImages=function(t){t&&this.ImgurService.getAlbumInfo(t).then(function(e){t.images=e.data.images})["catch"](function(t){console.log(t)})},t.prototype.refresh=function(){this.ImgurService.refresh()},t.$inject=["ImgurService"],t}();t.ImgurController=e}(imgur||(imgur={})),function(){angular.module("imgur").controller("ImgurController",imgur.ImgurController)}();var medium;!function(t){var e=function(){function t(t){this.MediumService=t,this.savedPosts=[],this.getMediumLoginUrl()}return t.prototype.getMediumLoginUrl=function(){var t=this;this.MediumService.getLoginUrl().then(function(e){t.mediumLoginUrl=e})},t.prototype.userLoggedIn=function(){return this.MediumService.userLoggedIn()},t.prototype.getCurrentUser=function(){this.MediumService.getCurrentUser().then(function(t){console.log(t)})["catch"](function(t){console.log(t)})},t.prototype.getPublications=function(){var t=this;this.MediumService.getUserPublications().then(function(e){t.publications=e})["catch"](function(t){console.error(t)})},t.prototype.getBookmarked=function(){var t=this;this.MediumService.getUserBookmarked().then(function(e){t.bookmarked=e})["catch"](function(t){console.error(t)})},t.$inject=["MediumService"],t}();t.MediumController=e}(medium||(medium={})),function(){angular.module("medium").controller("MediumController",medium.MediumController)}();var medium;!function(t){var e=function(){function t(t,e,r){this.$state=t,this.MediumService=e,this.UrlService=r;var n=r.getQueryString();e.login(n.state,n.code).then(function(r){e.getCurrentUser().then(function(e){console.log(e),t.go("medium")})["catch"](function(t){console.error(t)})})["catch"](function(t){console.error(t)})}return t.$inject=["$state","MediumService","UrlService"],t}();t.MediumAuthController=e}(medium||(medium={})),function(){angular.module("medium").controller("MediumAuthController",medium.MediumAuthController)}();var reddit;!function(t){var e=function(){function t(t){this.RedditService=t,this.loadingSavedPosts=!1,this.getSavedPosts()}return t.prototype.getCurrentUser=function(){},t.prototype.getSavedPosts=function(){var t=this;this.loadingSavedPosts=!0,this.RedditService.getSavedPosts().then(function(e){t.savedPosts=_.pluck(e.data.children,"data"),t.loadingSavedPosts=!1})["catch"](function(e){console.log(e),t.loadingSavedPosts=!1})},t.prototype.loadMoreSavedPosts=function(){var t=this;this.loadingSavedPosts=!0;var e=_.last(this.savedPosts).name;this.RedditService.getSavedPosts(e).then(function(e){t.loadingSavedPosts=!1,t.savedPosts=t.savedPosts.concat(_.pluck(e.data.children,"data"))})["catch"](function(e){t.loadingSavedPosts=!1,console.log(e)})},t.$inject=["RedditService"],t}();t.RedditController=e}(reddit||(reddit={})),function(){angular.module("reddit").controller("RedditController",reddit.RedditController)}();var tumblr;!function(t){var e=function(){function t(){this.templateUrl="views/tumblr-post.html",this.restrict="E",this.scope={post:"="},t.prototype.link=function(t,e,r){}}return t.factory=function(){var e=function(){return new t};return e},t}();t.TumblrPostDirective=e}(tumblr||(tumblr={})),function(){angular.module("tumblr").directive("fsTumblrPost",tumblr.TumblrPostDirective.factory())}();var twitter;!function(t){var e=function(){function t(t,e){this.TwitterService=t,this.UserService=e,this.savedPosts=[],this.favorites=[],this.loadingFavorites=!1,this.getFavorites()}return t.prototype.loadMoreFavorites=function(){var t=this;this.loadingFavorites=!0;var e=_.last(this.favorites).id;this.TwitterService.getFavorites(e).then(function(e){t.loadingFavorites=!1,Array.isArray(e)&&(t.favorites=t.favorites.concat(e))})["catch"](function(e){t.loadingFavorites=!1,console.log(e)})},t.prototype.getFavorites=function(){var t=this;this.loadingFavorites=!0,this.TwitterService.getFavorites().then(function(e){t.loadingFavorites=!1,Array.isArray(e)&&(t.favorites=e)})["catch"](function(e){t.loadingFavorites=!1,console.log(e)})},t.$inject=["TwitterService","UserService"],t}();t.TwitterController=e}(twitter||(twitter={})),function(){angular.module("twitter").controller("TwitterController",twitter.TwitterController)}();var user;!function(t){var e=function(){function t(t,e,r){this.$state=t,this.UserService=e,this.token=r}return t.prototype.resetPassword=function(){var t=this;this.formPassword.$valid&&this.UserService.resetPassword(this.password,this.token).then(function(e){t.$state.go("user")})["catch"](function(t){console.log(t)})},t.$inject=["$state","UserService","token"],t}();t.ResetPasswordController=e}(user||(user={})),function(){angular.module("user").controller("ResetPasswordController",user.ResetPasswordController)}();var user;!function(t){var e=function(){function t(t){this.UserService=t}return t.$inject=["UserService"],t}();t.UserController=e}(user||(user={})),function(){angular.module("user").controller("UserController",user.UserController)}();var user;!function(t){var e=function(){function t(){this.templateUrl="views/create-user.html",this.restrict="E",this.controller=r,this.controllerAs="ctrl",this.bindToController=!0,t.prototype.link=function(t,e,r){};
}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.CreateUserDirective=e;var r=function(){function t(t,e,r,n){this.$rootScope=t,this.$state=e,this.UserService=r,this.NotificationService=n,this.profileMessages=[],this.creatingUser=!1}return t.prototype.createUser=function(){var t=this;this.formUser.$valid&&(this.creatingUser=!0,this.UserService.createUser(this.user).then(function(e){t.creatingUser=!1,t.$state.go("user")})["catch"](function(e){t.creatingUser=!1,t.addMessage(t.profileMessages,e,"danger")}))},t.prototype.addMessage=function(t,e,r){void 0===r&&(r="success"),Array.isArray(e)||(e=[e]),angular.forEach(e,function(e){var n={};"string"==typeof e?n.message=e:_.extend(n,e),n.type=n.type||r,t.push(n)})},t.$inject=["$rootScope","$state","UserService","NotificationService"],t}()}(user||(user={})),function(){angular.module("user").directive("fsCreateUser",user.CreateUserDirective.factory())}();var user;!function(t){var e=function(){function t(){this.templateUrl="views/edit-user.html",this.restrict="E",this.controller=r,this.controllerAs="ctrl",this.bindToController=!0,t.prototype.link=function(t,e,r){}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.EditUserDirective=e;var r=function(){function t(t,e,r){this.$rootScope=t,this.UserService=e,this.NotificationService=r,this.passwordData={},this.profileMessages=[],this.passwordMessages=[],this.updatingProfile=!1,this.updatingPassword=!1,this.user=angular.copy(t.user)}return t.prototype.undoChanges=function(){this.user=angular.copy(this.$rootScope.user)},t.prototype.updateProfile=function(){var t=this;this.profileMessages=[],this.formUser.$valid&&(this.updatingProfile=!0,this.UserService.updateProfile(this.user).then(function(e){t.updatingProfile=!1,t.addMessage(t.profileMessages,{message:"Profile updated",timeout:2500})})["catch"](function(e){t.updatingProfile=!1,t.addMessage(t.profileMessages,e,"danger")}))},t.prototype.setOrUpdatePassword=function(){var t=this;this.passwordMessages=[],this.formPassword.$valid&&(this.updatingPassword=!0,this.UserService.setPassword(this.passwordData).then(function(e){t.formPassword.$setPristine(),t.updatingPassword=!1,t.addMessage(t.passwordMessages,{message:"Password updated",timeout:2500})})["catch"](function(e){t.updatingPassword=!1,t.addMessage(t.passwordMessages,e,"danger")}))},t.prototype.unlinkAccount=function(t,e){var r=this;this.UserService.unlinkAccount(t,e).then(function(t){r.user=angular.copy(r.$rootScope.user)})["catch"](function(t){console.log(t)})},t.prototype.addMessage=function(t,e,r){void 0===r&&(r="success"),Array.isArray(e)||(e=[e]),angular.forEach(e,function(e){var n={};"string"==typeof e?n.message=e:_.extend(n,e),n.type=n.type||r,t.push(n)})},t.$inject=["$rootScope","UserService","NotificationService"],t}()}(user||(user={})),function(){angular.module("user").directive("fsEditUser",user.EditUserDirective.factory())}();var user;!function(t){var e=function(){function t(e,r){this.$rootScope=e,this.UserService=r,this.template='<a class="btn btn-primary" href="/login/{{type}}">{{text}}</a>',this.restrict="E",this.replace=!0,this.scope={type:"@",size:"@"},t.prototype.link=function(t,r,n){function i(){e.user?(r.toggleClass("ng-hide",e.user[t.type]),t.text="Link "+t.type[0].toUpperCase()+t.type.substring(1)+" account"):(r.removeClass("ng-hide"),t.text="Login with "+t.type[0].toUpperCase()+t.type.substring(1))}if(t.size){switch(t.size.toUpperCase()){case"LARGE":t.size="btn-lg";break;case"SMALL":t.size="btn-sm";break;case"XSMALL":t.size="btn-xs";break;case"BLOCK":t.size="btn-block";break;default:t.size=""}r.addClass(t.size)}r.addClass("btn-"+t.type),i(),e.$watch("user",function(t){i()})}}return t.factory=function(){var e=function(e,r){return new t(e,r)};return e.$inject=t.$inject,e},t.$inject=["$rootScope","UserService"],t}();t.LinkAccountButtonDirective=e}(user||(user={})),function(){angular.module("user").directive("fsLinkAccountButton",user.LinkAccountButtonDirective.factory())}();var user;!function(t){var e=function(){function t(){this.templateUrl="views/login.html",this.restrict="E",this.controller=r,this.controllerAs="ctrl",this.bindToController=!0,t.prototype.link=function(t,e,r){}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.LoginDirective=e;var r=function(){function t(t,e,r,n){this.$rootScope=t,this.$state=e,this.UserService=r,this.NotificationService=n,this.user={},this.loginMessages=[],this.loggingIn=!1,this.sendForgotPasswordError=!1}return t.prototype.login=function(){var t=this;this.loginMessages=[],this.formLogin.$valid&&(this.loggingIn=!0,this.UserService.login(this.user).then(function(e){t.loggingIn=!1,t.$state.go("user")})["catch"](function(e){t.loggingIn=!1,t.addMessage(t.loginMessages,e,"danger")}))},t.prototype.forgotPassword=function(){var t=this;return this.loginMessages=[],this.sendForgotPasswordError=!1,!this.user.email||this.formLogin.userEmail.$error.length?void(this.sendForgotPasswordError=!0):void this.UserService.sendForgotPasswordEmail(this.user.email).then(function(e){e?t.addMessage(t.loginMessages,"An email has been sent to the email entered"):t.addMessage(t.loginMessages,"Something went wrong","danger")})["catch"](function(e){t.addMessage(t.loginMessages,"Something went wrong","danger")})},t.prototype.addMessage=function(t,e,r){void 0===r&&(r="success"),Array.isArray(e)||(e=[e]),angular.forEach(e,function(e){var n={};"string"==typeof e?n.message=e:_.extend(n,e),n.type=n.type||r,t.push(n)})},t.prototype.resetForm=function(){this.user={},this.formLogin.$setPristine()},t.$inject=["$rootScope","$state","UserService","NotificationService"],t}()}(user||(user={})),function(){angular.module("user").directive("fsLogin",user.LoginDirective.factory())}();var user;!function(t){var e=function(){function t(){this.templateUrl="views/social-login.html",this.restrict="E",t.prototype.link=function(t,e,r){t.options=["reddit","twitter","imgur","tumblr"]}}return t.factory=function(){var e=function(){return new t};return e.$inject=t.$inject,e},t.$inject=[],t}();t.SocialLoginDirective=e}(user||(user={})),function(){angular.module("user").directive("fsSocialLogin",user.SocialLoginDirective.factory())}();var user;!function(t){var e=function(){function t(e){this.$rootScope=e,this.template='<img src="" alt="UserImage"/>',this.restrict="E",this.replace=!0,t.prototype.link=function(t,r,n){function i(){e.user&&r.attr("src",e.user.profile.picture)}e.$watch("user",function(){i()})}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=t.$inject,e},t.$inject=["$rootScope"],t}();t.UserImageDirective=e}(user||(user={})),function(){angular.module("user").directive("fsUserImage",user.UserImageDirective.factory())}();